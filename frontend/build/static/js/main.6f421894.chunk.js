(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{64:function(e,t,n){e.exports=n(90)},90:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),o=n.n(c),i=n(13),s=n(28),u=(n(32),n(16)),l=n(17),m=n(63),f=n(21),p=n(2),d=n.n(p),h=n(36),v=n(37),b=n(5),y=n(10),g=n(11),w="http://127.0.0.1:3000".replace(/\/+$/,""),E=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new x;Object(y.a)(this,e),this.configuration=n,this.middleware=void 0,this.fetchApi=function(){var e=Object(b.a)(d.a.mark((function e(n,a){var r,c,o,i,s,u,l,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={url:n,init:a},c=Object(v.a)(t.middleware),e.prev=2,c.s();case 4:if((o=c.n()).done){e.next=15;break}if(!(i=o.value).pre){e.next=13;break}return e.next=9,i.pre(Object(h.a)({fetch:t.fetchApi},r));case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0=r;case 12:r=e.t0;case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),c.e(e.t1);case 20:return e.prev=20,c.f(),e.finish(20);case 23:return e.next=25,t.configuration.fetchApi(r.url,r.init);case 25:s=e.sent,u=Object(v.a)(t.middleware),e.prev=27,u.s();case 29:if((l=u.n()).done){e.next=40;break}if(!(m=l.value).post){e.next=38;break}return e.next=34,m.post({fetch:t.fetchApi,url:n,init:a,response:s.clone()});case 34:if(e.t2=e.sent,e.t2){e.next=37;break}e.t2=s;case 37:s=e.t2;case 38:e.next=29;break;case 40:e.next=45;break;case 42:e.prev=42,e.t3=e.catch(27),u.e(e.t3);case 45:return e.prev=45,u.f(),e.finish(45);case 48:return e.abrupt("return",s);case 49:case"end":return e.stop()}}),e,null,[[2,17,20,23],[27,42,45,48]])})));return function(t,n){return e.apply(this,arguments)}}(),this.middleware=n.middleware}return Object(g.a)(e,[{key:"withMiddleware",value:function(){var e,t=this.clone();return t.middleware=(e=t.middleware).concat.apply(e,arguments),t}},{key:"withPreMiddleware",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.map((function(e){return{pre:e}}));return this.withMiddleware.apply(this,Object(f.a)(a))}},{key:"withPostMiddleware",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.map((function(e){return{post:e}}));return this.withMiddleware.apply(this,Object(f.a)(a))}},{key:"request",value:function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createFetchParams(t),a=n.url,r=n.init,e.next=3,this.fetchApi(a,r);case 3:if(!((c=e.sent).status>=200&&c.status<300)){e.next=6;break}return e.abrupt("return",c);case 6:throw c;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createFetchParams",value:function(e){var t=this.configuration.basePath+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(t+="?"+this.configuration.queryParamsStringify(e.query));var n,a="undefined"!==typeof FormData&&e.body instanceof FormData||e.body instanceof URLSearchParams||(n=e.body,"undefined"!==typeof Blob&&n instanceof Blob)?e.body:JSON.stringify(e.body),r=Object.assign({},this.configuration.headers,e.headers);return{url:t,init:{method:e.method,headers:r,body:a,credentials:this.configuration.credentials}}}},{key:"clone",value:function(){var e=new(0,this.constructor)(this.configuration);return e.middleware=this.middleware.slice(),e}}]),e}(),k=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;return Object(y.a)(this,n),(r=t.call(this,a)).field=e,r.name="RequiredError",r}return n}(Object(m.a)(Error)),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(y.a)(this,e),this.configuration=t}return Object(g.a)(e,[{key:"basePath",get:function(){return null!=this.configuration.basePath?this.configuration.basePath:w}},{key:"fetchApi",get:function(){return this.configuration.fetchApi||window.fetch.bind(window)}},{key:"middleware",get:function(){return this.configuration.middleware||[]}},{key:"queryParamsStringify",get:function(){return this.configuration.queryParamsStringify||O}},{key:"username",get:function(){return this.configuration.username}},{key:"password",get:function(){return this.configuration.password}},{key:"apiKey",get:function(){var e=this.configuration.apiKey;if(e)return"function"===typeof e?e:function(){return e}}},{key:"accessToken",get:function(){var e=this.configuration.accessToken;if(e)return"function"===typeof e?e:function(){return e}}},{key:"headers",get:function(){return this.configuration.headers}},{key:"credentials",get:function(){return this.configuration.credentials}}]),e}();function j(e,t){var n=e[t];return null!==n&&void 0!==n}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(e).map((function(n){var a=t+(t.length?"[".concat(n,"]"):n),r=e[n];if(r instanceof Array){var c=r.map((function(e){return encodeURIComponent(String(e))})).join("&".concat(encodeURIComponent(a),"="));return"".concat(encodeURIComponent(a),"=").concat(c)}return r instanceof Object?O(r,a):"".concat(encodeURIComponent(a),"=").concat(encodeURIComponent(String(r)))})).filter((function(e){return e.length>0})).join("&")}var N,S=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};Object(y.a)(this,e),this.raw=t,this.transformer=n}return Object(g.a)(e,[{key:"value",value:function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.raw.json();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.transformer.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function T(e){return function(e,t){if(void 0===e||null===e)return e;return{name:e.name,categories:e.categories.map(q),features:e.features.map(C)}}(e)}function q(e){return function(e,t){if(void 0===e||null===e)return e;return{name:e.name,id:e.id,subcategories:e.subcategories.map(R)}}(e)}function R(e){return function(e,t){if(void 0===e||null===e)return e;return{name:e.name,id:e.id}}(e)}function C(e){return function(e,t){return e}(e)}function A(e){return function(e,t){if(void 0===e||null===e)return e;return{name:e.name,magnet:e.magnet,seeds:e.seeds,downloads:j(e,"downloads")?e.downloads:void 0,peers:e.peers,size:e.size,time:j(e,"time")?e.time:void 0,link:e.link,isVip:j(e,"isVip")?e.isVip:void 0,imdb:j(e,"imdb")?e.imdb:void 0,numFiles:j(e,"numFiles")?e.numFiles:void 0,category:R(e.category)}}(e)}function P(e){return function(e,t){if(void 0===e||null===e)return e;return{success:e.success}}(e)}function U(e){return function(e,t){if(void 0===e||null===e)return e;return{link:e.link,infoHash:e.infoHash,name:e.name,started:e.started,updated:e.updated,files:e.files.map(F),downloaded:e.downloaded,downloadSpeed:e.downloadSpeed}}(e)}function F(e){return function(e,t){if(void 0===e||null===e)return e;return{name:e.name,path:e.path,type:e.type,length:e.length,stream:e.stream}}(e)}function I(e){return function(e,t){if(void 0===e||null===e)return e;return{totalDiskSpace:e.totalDiskSpace,freeDiskSpace:e.freeDiskSpace,usedTorrentSpace:e.usedTorrentSpace}}(e)}!function(e){e.Search="search"}(N||(N={}));var B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"authRaw",value:function(){var e=Object(b.a)(d.a.mark((function e(){var t,n,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n={},this.configuration&&this.configuration.accessToken&&(a=this.configuration.accessToken,(r="function"===typeof a?a("apiKey",[]):a)&&(n.Authorization="Bearer ".concat(r))),e.next=5,this.request({path:"/api/auth",method:"POST",headers:n,query:t});case 5:return c=e.sent,e.abrupt("return",new S(c,(function(e){return P(e)})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"auth",value:function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authRaw();case 2:return t=e.sent,e.next=5,t.value();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(E),D=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"getProvidersRaw",value:function(){var e=Object(b.a)(d.a.mark((function e(){var t,n,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n={},this.configuration&&this.configuration.accessToken&&(a=this.configuration.accessToken,(r="function"===typeof a?a("apiKey",[]):a)&&(n.Authorization="Bearer ".concat(r))),e.next=5,this.request({path:"/api/browse/providers",method:"GET",headers:n,query:t});case 5:return c=e.sent,e.abrupt("return",new S(c,(function(e){return e.map(T)})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProviders",value:function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvidersRaw();case 2:return t=e.sent,e.next=5,t.value();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchTorrentsRaw",value:function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.query&&void 0!==t.query){e.next=2;break}throw new k("query","Required parameter requestParameters.query was null or undefined when calling searchTorrents.");case 2:if(null!==t.provider&&void 0!==t.provider){e.next=4;break}throw new k("provider","Required parameter requestParameters.provider was null or undefined when calling searchTorrents.");case 4:return n={},void 0!==t.query&&(n.query=t.query),void 0!==t.provider&&(n.provider=t.provider),void 0!==t.category&&(n.category=t.category),a={},this.configuration&&this.configuration.accessToken&&(r=this.configuration.accessToken,(c="function"===typeof r?r("apiKey",[]):r)&&(a.Authorization="Bearer ".concat(c))),e.next=12,this.request({path:"/api/browse/search",method:"GET",headers:a,query:n});case 12:return o=e.sent,e.abrupt("return",new S(o,(function(e){return e.map(A)})));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchTorrents",value:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.searchTorrentsRaw(t);case 2:return n=e.sent,e.next=5,n.value();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(E),L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"getUsageRaw",value:function(){var e=Object(b.a)(d.a.mark((function e(){var t,n,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n={},this.configuration&&this.configuration.accessToken&&(a=this.configuration.accessToken,(r="function"===typeof a?a("apiKey",[]):a)&&(n.Authorization="Bearer ".concat(r))),e.next=5,this.request({path:"/api/usage",method:"GET",headers:n,query:t});case 5:return c=e.sent,e.abrupt("return",new S(c,(function(e){return I(e)})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUsage",value:function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsageRaw();case 2:return t=e.sent,e.next=5,t.value();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(E),H=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"createTorrentRaw",value:function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.torrent&&void 0!==t.torrent){e.next=2;break}throw new k("torrent","Required parameter requestParameters.torrent was null or undefined when calling createTorrent.");case 2:return n={},void 0!==t.torrent&&(n.torrent=t.torrent),a={},this.configuration&&this.configuration.accessToken&&(r=this.configuration.accessToken,(c="function"===typeof r?r("apiKey",[]):r)&&(a.Authorization="Bearer ".concat(c))),e.next=8,this.request({path:"/api/torrents",method:"POST",headers:a,query:n});case 8:return o=e.sent,e.abrupt("return",new S(o,(function(e){return U(e)})));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createTorrent",value:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createTorrentRaw(t);case 2:return n=e.sent,e.next=5,n.value();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTorrentRaw",value:function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.infoHash&&void 0!==t.infoHash){e.next=2;break}throw new k("infoHash","Required parameter requestParameters.infoHash was null or undefined when calling getTorrent.");case 2:return n={},a={},this.configuration&&this.configuration.accessToken&&(r=this.configuration.accessToken,(c="function"===typeof r?r("apiKey",[]):r)&&(a.Authorization="Bearer ".concat(c))),e.next=7,this.request({path:"/api/torrents/{infoHash}".replace("{".concat("infoHash","}"),encodeURIComponent(String(t.infoHash))),method:"GET",headers:a,query:n});case 7:return o=e.sent,e.abrupt("return",new S(o,(function(e){return U(e)})));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTorrent",value:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTorrentRaw(t);case 2:return n=e.sent,e.next=5,n.value();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTorrentsRaw",value:function(){var e=Object(b.a)(d.a.mark((function e(){var t,n,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n={},this.configuration&&this.configuration.accessToken&&(a=this.configuration.accessToken,(r="function"===typeof a?a("apiKey",[]):a)&&(n.Authorization="Bearer ".concat(r))),e.next=5,this.request({path:"/api/torrents",method:"GET",headers:n,query:t});case 5:return c=e.sent,e.abrupt("return",new S(c,(function(e){return e.map(U)})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTorrents",value:function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTorrentsRaw();case 2:return t=e.sent,e.next=5,t.value();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(E),z="".concat(window.location.protocol,"//").concat(window.location.host);function M(e){var t=(e||{}).bearer;return new x({basePath:z,accessToken:t})}var K={},G=n(7),W=n(8);function J(e){var t=V();localStorage.setItem("torrentsHistory",JSON.stringify([e].concat(Object(f.a)(t.filter((function(t){return t.link!==e.link})))).slice(0,10)))}function V(){var e=localStorage.getItem("torrentsHistory");try{return e?JSON.parse(e):[]}catch(t){return[]}}var Y=n(92),$=n(98),_=n(99),Z=n(61),Q=n(93);function X(e){return function(t){var n=Object(s.useGlobal)("bearerRequired"),c=Object(W.a)(n,2),o=c[0],i=c[1],u=Object(s.useGlobal)("bearer"),l=Object(W.a)(u,2),m=l[0],f=l[1],p=Object(a.useState)(""),d=Object(W.a)(p,2),h=d[0],v=d[1];return Object(a.useEffect)((function(){void 0===o&&new B(M()).auth().then((function(){i(!1)})).catch((function(e){e instanceof Response&&401===e.status?i(!0):v("Failed to authorize")}))}),[o,i]),void 0===o?r.a.createElement("div",{className:"d-flex justify-content-center mt-5"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):o&&m||!o?r.a.createElement(e,Object.assign({bearer:m},t)):r.a.createElement(Y.a,null,r.a.createElement("h2",{className:"mt-5"},"Authorization"),!!h&&r.a.createElement($.a,{variant:"danger",className:"mt-2"},h),!h&&r.a.createElement($.a,{variant:"warning",className:"mt-2"},"Authorization is required to access this page"),r.a.createElement(_.a,{onSubmit:function(e){e.preventDefault();var t=new FormData(e.target).get("key");"string"===typeof t&&new B(M({bearer:t})).auth().then((function(){f(t)})).catch((function(){v("Failed to authorize")}))}},r.a.createElement(_.a.Row,null,r.a.createElement(Z.a,null,r.a.createElement(_.a.Control,{placeholder:"Key",type:"password",name:"key"})),r.a.createElement(Z.a,null,r.a.createElement(Q.a,{type:"submit",variant:"primary",className:"w-100"},"Authorize")))))}}var ee=X((function(){var e=Object(a.useState)(""),t=Object(W.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(V()),s=Object(W.a)(o,2),u=s[0],l=s[1],m=Object(G.f)();return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5"},"Create video stream"),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",name:"link",placeholder:"Torrent file or magnet link",value:n,onChange:function(e){c(e.target.value)}})),r.a.createElement("button",{className:"btn btn-outline-primary",onClick:function(){n.trim()&&m.push("/play?torrent=".concat(encodeURIComponent(n)))}},"Load video"),u.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"mt-5"},"History"),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,u.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},r.a.createElement(i.b,{to:"/play?torrent=".concat(encodeURIComponent(e.link)),className:"btn btn-outline-primary ti-control-play"}),r.a.createElement("button",{className:"btn btn-outline-danger ti-close ml-1",onClick:function(){!function(e){var t=V();localStorage.setItem("torrentsHistory",JSON.stringify(t.filter((function(t){return t.link!==e.link}))))}(e),l(V())}}))))}))))))}));function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,a=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,c)).toFixed(a))+" "+r[c]}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Response)){e.next=13;break}return e.prev=1,e.next=4,t.json();case 4:if(n=e.sent.error){e.next=7;break}throw new Error;case 7:return e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return","Server returned error: ".concat(t.statusText));case 13:return e.abrupt("return",String(t));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}var re=X((function(e){var t=e.bearer,n=Object(a.useState)(),c=Object(W.a)(n,2),o=c[0],s=c[1],u=Object(a.useState)(""),l=Object(W.a)(u,2),m=l[0],p=l[1],h=Object(G.g)(),v=new URLSearchParams(h.search),y=v.get("torrent"),g=v.get("file"),w=null===o||void 0===o?void 0:o.files.find((function(e){return e.path===g}));return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=8;break}return e.next=3,new H(M({bearer:t})).createTorrent({torrent:y});case 3:n=e.sent,s(n),J({name:n.name,link:n.link}),e.next=9;break;case 8:p("Torrent link is not specified");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().catch(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,ne(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[y,t]),r.a.createElement("div",{className:"container"},m&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},m),!o&&!m&&r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),o&&y&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,r.a.createElement("small",null,o.name)),g?r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"text-muted"},r.a.createElement("small",null,g),w&&r.a.createElement("a",{href:z+w.stream,className:"btn ti-cloud-down text-primary"}," ")," ","- ",r.a.createElement(i.b,{to:"?torrent=".concat(encodeURIComponent(y))},"view all"))):r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"File"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Play"),r.a.createElement("th",null,"Link"))),r.a.createElement("tbody",null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",a=Object(f.a)(e).sort((function(e,n){return function e(t,n){if("number"===typeof t&&"number"===typeof n)return t<n?-1:t>n?1:0;if(t instanceof Array&&n instanceof Array){var a=t.map((function(t,a){return e(t,n[a])})).filter((function(e){return 0!==e}));return a.length?a[0]:1}if("object"===typeof t&&"object"===typeof n)return e(Object.values(null!==t&&void 0!==t?t:{})[0],Object.values(null!==n&&void 0!==n?n:{})[0]);var r=String(t).toLowerCase(),c=String(n).toLowerCase();return r<c?-1:r>c?1:0}(t(e),t(n))}));return"desc"===n?a.reverse():a}(o.files,(function(e){return e.name})).map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.path.split("/").map((function(e,t,n){return t+1<n.length?r.a.createElement("span",{className:"text-muted"},e," /"," "):e}))),r.a.createElement("td",null,te(e.length)),r.a.createElement("td",null,r.a.createElement(i.b,{to:"?torrent=".concat(encodeURIComponent(y),"&file=").concat(encodeURIComponent(e.path)),className:"btn btn-outline-primary ti-control-play"})),r.a.createElement("td",null,r.a.createElement("a",{href:z+e.stream,className:"btn btn-outline-primary ti-cloud-down"}," ")))})))),g&&y&&w&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{file:w}),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",value:z+w.stream})))))}));function ce(e){var t=e.file;return t.type.includes("video")?r.a.createElement(se,{video:z+t.stream,type:t.type}):t.type.includes("image")?r.a.createElement(oe,{image:z+t.stream,name:t.name}):t.type.includes("text")?r.a.createElement(ie,{text:z+t.stream}):r.a.createElement("div",null,r.a.createElement($.a,{variant:"warning"},"Unknown file type: ",t.type,r.a.createElement("a",{href:z+t.stream,className:"btn btn-outline-primary ti-cloud-down ml-5"},"Direct link")))}function oe(e){var t=e.image,n=e.name;return r.a.createElement("div",{className:"w-100 text-center"},r.a.createElement("img",{src:t,alt:n}))}function ie(e){var t=e.text,n=Object(a.useState)(),c=Object(W.a)(n,2),o=c[0],i=c[1];return Object(a.useEffect)((function(){fetch(t).then(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,t.text();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),r.a.createElement("div",{className:"card card-body",style:{maxHeight:"500px"}},void 0===o&&r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("pre",null,o))}function se(e){var t=e.video,n=e.type;return r.a.createElement("div",{className:"embed-responsive embed-responsive-16by9"},r.a.createElement("video",{width:"720",controls:!0},r.a.createElement("source",{src:t,type:n}),"Your browser does not support HTML5 video."))}var ue=n(94),le=n(60),me=n(95),fe=n(96),pe=n(97),de=n(34);function he(e){var t=Object(a.useContext)(G.d).location;return Object(a.useMemo)((function(){return new URLSearchParams(t.search)}),[t.search]).get(e)}var ve=X((function(e){var t,n,c,o,s,u=e.bearer,l=Object(a.useState)(""),m=Object(W.a)(l,2),f=m[0],p=m[1],h=Object(a.useState)(!1),v=Object(W.a)(h,2),y=v[0],g=v[1],w=Object(a.useState)([]),E=Object(W.a)(w,2),k=E[0],x=E[1],j=Object(a.useState)(),O=Object(W.a)(j,2),N=O[0],S=O[1],T=function(){var e=Object(a.useContext)(G.d),t=e.location,n=e.history;return function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new URLSearchParams(t.search);e.delete&&e.delete.forEach((function(e){r.delete(e)})),e.set&&Object.entries(e.set).forEach((function(e){var t=Object(W.a)(e,2),n=t[0],a=t[1];a?r.set(n,a):r.delete(n)})),a?n.replace({search:r.toString().replace(encodeURIComponent(":"),":")}):n.push({search:r.toString().replace(encodeURIComponent(":"),":")})}}(),q=null!==(t=he("provider"))&&void 0!==t?t:"",R=null!==(n=he("category"))&&void 0!==n?n:"",C=null!==(c=he("query"))&&void 0!==c?c:"";Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x,e.next=3,new D(M({bearer:u})).getProviders();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().catch(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,ne(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[u]);var A=q&&C;Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(""),!A){e.next=12;break}return e.prev=2,g(!0),e.t0=S,e.next=7,new D(M({bearer:u})).searchTorrents({provider:q,query:C,category:R});case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:return e.prev=9,g(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[2,,9,12]])})));return function(){return e.apply(this,arguments)}})()().catch(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,ne(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[q,C,R,A,u]);var P=k.map((function(e){return e.name})).sort(),U=q&&null!==(o=null===(s=k.find((function(e){return e.name===q})))||void 0===s?void 0:s.categories)&&void 0!==o?o:[];return r.a.createElement(Y.a,null,r.a.createElement(_.a,{onSubmit:function(e){e.preventDefault();var t=new FormData(e.target).get("query");T({set:{query:"string"===typeof t?t:""}})}},r.a.createElement(ue.a,null,r.a.createElement(Z.a,{sm:!0,className:"mt-2"},r.a.createElement(ue.a,null,r.a.createElement(Z.a,null,r.a.createElement(le.a,{as:"select",value:q,onChange:function(e){T({set:{provider:e.target.value},delete:["category","query"]})}},r.a.createElement("option",{value:""},"-- select provider --"),P.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(Z.a,null,r.a.createElement(le.a,{as:"select",value:R,onChange:function(e){T({set:{category:e.target.value},delete:["query"]})},disabled:!q},r.a.createElement("option",{value:""},"All categories"),U.map((function(e,t){return r.a.createElement(a.Fragment,{key:t},e.subcategories.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("optgroup",{label:e.name},r.a.createElement("option",{value:e.id},"All ",e.name),e.subcategories.map((function(e,t){return r.a.createElement("option",{value:e.id,key:t},e.name)})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:e.id},e.name)))})))))),r.a.createElement(Z.a,{sm:!0,className:"mt-2"},r.a.createElement(me.a,null,r.a.createElement(le.a,{disabled:!q,defaultValue:C,type:"search",placeholder:"Search...",name:"query"}),r.a.createElement(me.a.Append,null,r.a.createElement(Q.a,{disabled:!q,variant:"outline-primary",type:"submit"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-search"},r.a.createElement("circle",{cx:11,cy:11,r:8}),r.a.createElement("line",{x1:21,y1:21,x2:"16.65",y2:"16.65"})))))))),f&&r.a.createElement($.a,{variant:"danger",className:"mt-5"},f),y&&r.a.createElement("div",{className:"d-flex justify-content-center mt-5"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),!y&&0===(null===N||void 0===N?void 0:N.length)&&A&&r.a.createElement($.a,{variant:"info",className:"mt-5"},"No results were found"),!y&&r.a.createElement(fe.a,{className:"mt-3"},r.a.createElement("tbody",null,null===N||void 0===N?void 0:N.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.link?r.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},e.name):e.name," ",r.a.createElement(pe.a,{variant:"secondary",pill:!0,style:{cursor:"pointer"},onClick:function(){T({set:{category:e.category.id}})}},e.category.name)," ",e.isVip&&r.a.createElement("i",{className:"ti-crown text-warning"})),r.a.createElement("td",{className:"text-right",style:{whiteSpace:"nowrap"}},e.size),r.a.createElement("td",{className:"text-right",style:{whiteSpace:"nowrap"}},!!e.time&&Object(de.a)(new Date(e.time))),r.a.createElement("td",{className:"text-right",style:{whiteSpace:"nowrap"}},null!=e.seeds&&r.a.createElement("span",{className:"text-success"},r.a.createElement("small",{className:"ti-arrow-up"}),e.seeds)," ",null!=e.peers&&r.a.createElement("span",{className:"text-danger"},r.a.createElement("small",{className:"ti-arrow-down"}),e.peers)," "),r.a.createElement("td",{className:"text-right",style:{whiteSpace:"nowrap"}},null!=e.downloads&&r.a.createElement("span",null,r.a.createElement("small",{className:"ti-download"})," ",e.downloads)),r.a.createElement("td",{className:"text-right"},r.a.createElement(i.b,{to:"/play?torrent=".concat(encodeURIComponent(e.magnet)),className:"btn btn-outline-primary ti-control-play"}))))})))))})),be=X((function(e){var t=e.bearer,n=Object(a.useState)(),c=Object(W.a)(n,2),o=c[0],s=c[1],u=Object(a.useState)(),l=Object(W.a)(u,2),m=l[0],f=l[1],p=Object(a.useState)(""),h=Object(W.a)(p,2),v=h[0],y=h[1],g=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new H(M({bearer:t})).getTorrents().then((function(e){return s(e)})).catch(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,ne(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new L(M({bearer:t})).getUsage().then((function(e){return f(e)})).catch(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,ne(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e,t;return g().then((function(){e=setInterval((function(){g()}),5e3)})),w().then((function(){t=setInterval((function(){g()}),6e4)})),function(){clearInterval(e),clearInterval(t)}}),[]),r.a.createElement("div",{className:"container"},v&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},v),!o&&!v&&r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),m&&r.a.createElement("div",{className:"card-deck mb-3 text-center"},r.a.createElement("div",{className:"card mb-4 box-shadow"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"my-0 font-weight-normal"},"Disk space")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"card-title pricing-card-title"},te(m.totalDiskSpace-m.freeDiskSpace),r.a.createElement("small",{className:"text-muted"},"/ ",te(m.totalDiskSpace))),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat((m.totalDiskSpace-m.freeDiskSpace)/m.totalDiskSpace*100,"%")}})))),r.a.createElement("div",{className:"card mb-4 box-shadow"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:"my-0 font-weight-normal"},"Torrents space")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"card-title pricing-card-title"},te(m.usedTorrentSpace),r.a.createElement("small",{className:"text-muted"},"/ ",te(m.freeDiskSpace+m.usedTorrentSpace))),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(m.usedTorrentSpace/(m.freeDiskSpace+m.usedTorrentSpace)*100,"%")}}))))),o&&r.a.createElement(r.a.Fragment,null,o.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Download"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Play"))),r.a.createElement("tbody",null,o.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,te(e.downloaded)," (",te(e.downloadSpeed),"/s)"),r.a.createElement("td",null,Object(de.a)(e.started)),r.a.createElement("td",null,r.a.createElement(i.b,{to:"/play?torrent=".concat(encodeURIComponent(e.link)),className:"btn btn-outline-primary ti-control-play"}))))}))))):r.a.createElement("div",{className:"alert alert-warning",role:"alert"},"No active torrents at the moment")))}));function ye(){return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow"},r.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},r.a.createElement(i.b,{className:"text-decoration-none text-dark",to:"/"},"Torrent Stream Server")),r.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},r.a.createElement(i.b,{className:"p-2 text-dark",to:"/"},"Home"),r.a.createElement(i.b,{className:"p-2 text-dark",to:"/browse"},"Browse"),r.a.createElement(i.b,{className:"p-2 text-dark",to:"/dashboard"},"Dashboard")),r.a.createElement("a",{className:"btn btn-outline-primary",href:"https://github.com/KiraLT/torrent-stream-server",target:"_blank",rel:"noopener noreferrer"},"Find on GitHub")),r.a.createElement(G.c,null,r.a.createElement(G.a,{path:"/",component:ee,exact:!0}),r.a.createElement(G.a,{path:"/play",component:re,exact:!0}),r.a.createElement(G.a,{path:"/browse",component:ve,exact:!0}),r.a.createElement(G.a,{path:"/dashboard",component:be,exact:!0})))}var ge,we=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ee(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");we?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ke(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ke(t,e)}))}}function ke(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}ge=document.getElementById("root"),Object(s.setGlobal)(K),Ee({onUpdate:function(){var e=document.createElement("div");e.style.position="fixed",e.style.bottom="0",e.style.left="0",e.style.right="0",e.style.zIndex="9999",e.style.textAlign="center",e.style.background="rgba(208, 208, 208, 0.90)",e.style.padding="2px",e.className="text-secondary",e.innerHTML='\n                New content is available and will be used when all tabs for this page are closed\n                <button class="btn btn-link" onClick="this.parentNode.style.display = \'none\'">\n                    x\n                </button>',document.body.appendChild(e)}}),o.a.render(r.a.createElement(i.a,null,r.a.createElement(ye,null)),ge)}},[[64,1,2]]]);
//# sourceMappingURL=main.6f421894.chunk.js.map